@model IEnumerable<UC_13_Henrique_Webssite.Models.Imovel>

@{
    ViewData["Title"] = "Catálogo de Imóveis";
}

<h2>Catálogo de Imóveis</h2>

@if (TempData["Mensagem"] != null)
{
    <div class="alert alert-success">
        @TempData["Mensagem"]
    </div>
}

@if (Model != null && Model.Any())
{
    <div style="display: flex; flex-wrap: wrap; gap: 20px;">
        @foreach (var item in Model)
        {
            <div style="border: 1px solid #ccc; padding: 15px; width: 300px; background-color: #f9f9f9; border-radius: 8px; text-align: center;">

                <!-- Imagem do imóvel -->
                <div style="margin-bottom: 10px;">
                    @if (!string.IsNullOrEmpty(item.ImagemUrlimoveis))
                    {
                        <img src="@item.ImagemUrlimoveis" alt="@item.Nome"
                             style="width: 100%; height: 150px; object-fit: cover; border-radius: 6px;" />
                    }
                </div>

                <!-- Nome -->
                <h4>@item.Nome</h4>

                <!-- Endereço -->
                <p><strong>Endereço:</strong> @item.Endereco, @item.Cidade - @item.Estado</p>

                <!-- Área -->
                <p><strong>Área:</strong> @item.Area m²</p>

                <!-- Preço -->
                <p><strong>Preço:</strong> @item.Preco.ToString("C")</p>

                <!-- Fornecedor -->
                <p><strong>Fornecedor:</strong> @(item.Fornecedor?.Nome ?? "Não informado")</p>

                <!-- Botão de compra -->
                <form asp-controller="Imovels" asp-action="ComprarImovel" method="post">
                    <input type="hidden" name="produtoId" value="@item.ProdutoId" />
                    <button type="submit" class="btn btn-primary">Comprar Imóvel</button>
                </form>
            </div>
        }
    </div>
}
else
{
    <p>Nenhum imóvel disponível no momento.</p>
}
